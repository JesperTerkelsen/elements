<!DOCTYPE html>
<html>
	<head>
		<title>Tradeshift Elements</title>

		<!-- Don't shim CSS Custom Properties on IE11 -->
		<script>
			if (!window.Promise) {
				window.ShadyCSS = { nativeCss: true };
			}
		</script>

		<!-- Enable ES5 class-less Custom Elements -->
		<script src="/node_modules/@webcomponents/webcomponentsjs/custom-elements-es5-adapter.js"></script>
		<!-- Load appropriate polyfills and shims -->
		<script src="/node_modules/@webcomponents/webcomponentsjs/webcomponents-loader.js" defer></script>

		<!-- Set :root CSS Custom Properties -->
		<link rel="stylesheet" href="/packages/core/src/vars.css" />
		<!-- Set @font-face for all needed fonts -->
		<link rel="stylesheet" href="/packages/core/src/fonts.css" />
		<!-- Set margin/padding to be 0 for <html> -->
		<link rel="stylesheet" href="/packages/core/src/reset.css" />

		<!-- Load user-styles -->
		<link rel="stylesheet" href="/index.css" />

		<!-- Load Tradeshift Elements once the polyfills are ready (optional?) -->
		<script>
			window.addEventListener('WebComponentsReady', function() {
				var coreEl = document.createElement('script');
				coreEl.setAttribute('src', '/packages/core/lib/core.umd.js');
				document.body.appendChild(coreEl);
				coreEl.onload = function() {
					var components = [
						'icon',
						'button',
						'button-group',
						// 'board',
						'root',
						// 'list-item',
						// 'tooltip',
						// 'typography',
						// 'input',
						// 'label',
						// 'aside',
						// 'card',
						// 'checkbox',
						// 'cover',
						// 'file-card',
						// 'file-size',
						// 'file-uploader-input',
						// 'pager',
						// 'progress-bar',
						// 'header',
						// 'help-text',
						'note',
						// 'radio',
						// 'radio-group',
						// 'spinner',
						'modal',
						// 'search',
						// 'basic-table',
						// 'status',
						// 'document-card',
						// 'tabs',
						// 'tab'
						'dialog'
					];
					components.forEach(function(component) {
						var el = document.createElement('script');
						el.setAttribute('src', '/packages/components/' + component + '/lib/' + component + '.umd.js');
						document.body.appendChild(el);
					});
				};
			});
		</script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	</head>

	<body>
		<ts-root>
			<ts-header slot="header" class="header" icon="/icon.svg" title="Header">
				<ts-button>Button</ts-button>
			</ts-header>
			<footer slot="footer" class="footer">Footer</footer>
			<section slot="sidebar-left" class="sidebar-left">Left Sidebar</section>
			<section slot="sidebar-right" class="sidebar-right">
				Right Sidebar
			</section>
			<section slot="sidebar-inner-left" class="sidebar-inner-left">
				Inner Left Sidebar
			</section>
			<section slot="sidebar-inner-right" class="sidebar-inner-right">
				Inner Right Sidebar
			</section>

			<article id="ts-root-toggle">
				<ts-header icon="/icon.svg" title="Header">
					<ts-button>Button</ts-button>
				</ts-header>
				<h2>ts-root</h2>
				<ts-button-group>
					<ts-button onclick="toggleSlot('header', this)">Toggle Header</ts-button>
					<ts-button onclick="toggleSlot('footer', this)">Toggle Footer</ts-button>
					<ts-button onclick="toggleSlot('sidebar-left', this)">Toggle Left Sidebar</ts-button>
					<ts-button onclick="toggleSlot('sidebar-right', this)">Toggle Right Sidebar</ts-button>
					<ts-button onclick="toggleSlot('sidebar-inner-left', this)">Toggle Inner Left Sidebar</ts-button>
					<ts-button onclick="toggleSlot('sidebar-inner-right', this)">Toggle Inner Right Sidebar</ts-button>
					<ts-button onclick="toggleCover('my-cover')">Toggle cover</ts-button>
					<ts-button onclick="toggleAside('my-aside')">Toggle aside</ts-button>
					<ts-button onclick="toggleModal('big-modal')">Toggle Big modal</ts-button>
					<ts-button onclick="toggleModal('medium-modal')">Toggle Medium modal</ts-button>
					<ts-button onclick="toggleModal('dialog')">Toggle dialog default</ts-button>
					<ts-button onclick="toggleModal('dialog1')">Toggle dialog warning focus on cancel</ts-button>
					<ts-button onclick="toggleModal('dialog2')">Toggle dialog danger focus on accept</ts-button>
					<ts-button onclick="toggleModal('dialog3')">Toggle dialog multiple actions</ts-button>
					<ts-button onclick="toggleModal('dialog4')">Toggle dialog confirm with one extra option</ts-button>
					<ts-button onclick="toggleModal('dialog5')"
						>Toggle dialog focused="accept" primary="cancel" type="danger"</ts-button
					>
				</ts-button-group>
				<script>
					function toggleSlot(name, button) {
						var enabledSlot = document.querySelector('[slot=' + name + ']');
						if (enabledSlot) {
							button.removeAttribute('type');
							return enabledSlot.setAttribute('slot', '!' + name);
						}

						var disabledSlot = document.querySelector('[slot="!' + name + '"]');
						if (disabledSlot) {
							button.setAttribute('type', 'primary');
							return disabledSlot.setAttribute('slot', name);
						}
					}

					function toggleCover(id) {
						let cover = document.querySelector('#' + id);
						if (cover.hasAttribute('data-visible')) {
							cover.removeAttribute('data-visible');
						} else {
							cover.setAttribute('data-visible', true);
						}
					}

					function toggleAside(id) {
						let aside = document.querySelector('#' + id);
						if (aside.hasAttribute('data-visible')) {
							aside.removeAttribute('data-visible');
						} else {
							aside.setAttribute('data-visible', true);
						}
					}

					function toggleModal(id) {
						toggleAside(id);
					}

					(function() {
						setTimeout(function() {
							const slots = [
								'header',
								'footer',
								'sidebar-left',
								'sidebar-right',
								'sidebar-inner-left',
								'sidebar-inner-right'
							];
							slots.forEach(function(slotName) {
								var slot = document.querySelector('[slot=' + slotName + ']');
								if (slot) {
									slot.setAttribute('slot', '!' + slot.getAttribute('slot'));
								}
							});
						});
					})();
				</script>
			</article>
			<ts-modal id="medium-modal" data-title="Available Apps" data-size="medium">
				<ts-note slot="note">
					Some important note about this information.
				</ts-note>
				<div id="medium-content" slot="main"></div>
				<div slot="footer">
					<ts-button onclick="closeModal()">Close!</ts-button>
				</div>
			</ts-modal>
			<ts-dialog id="dialog" text="Are you sure you want to delete the document?"></ts-dialog>
			<ts-dialog
				id="dialog1"
				focused="cancel"
				type="warning"
				text="Are you sure you want to delete the document?"
			></ts-dialog>
			<ts-dialog
				id="dialog2"
				focused="accept"
				type="danger"
				text="Are you sure you want to delete the document?"
			></ts-dialog>
			<ts-dialog
				id="dialog5"
				focused="accept"
				primary="cancel"
				type="danger"
				text="Are you sure you want to delete the document?"
			></ts-dialog>
			<ts-dialog id="dialog3" type="warning" text="Are you sure you want to delete the document?">
				<ts-button-group slot="extra-buttons">
					<ts-button type="danger">another action</ts-button>
					<ts-button focused type="primary">primary action</ts-button>
					<ts-button>maybe just another one</ts-button>
				</ts-button-group>
			</ts-dialog>
			<ts-dialog
				id="dialog4"
				icon="ada"
				type="confirm"
				primary="accept"
				text="Are you sure you want to delete the document? Maybe you need to reconsider doing something else?"
			>
				<ts-button slot="extra-buttons" type="accept" grouped>test</ts-button>
			</ts-dialog>
		</ts-root>
		<script>
			const dialog = document.getElementById('dialog');
			dialog.setAttribute('translations', JSON.stringify({ accept_button: 'test' }));
			dialog.addEventListener('accept', function() {
				console.log('dialog accept');
			});
			dialog.addEventListener('cancel', function() {
				console.log('dialog cancel');
			});
			dialog.addEventListener('close', function() {
				console.log('close dialog');
			});
			dialog.addEventListener('closed', function() {
				console.log('medium dialog closed');
			});

			function closeModal() {
				document.getElementById('medium-modal').close();
			}

			function closeBigModal() {
				document.getElementById('big-modal').close();
			}

			function onOpen() {
				console.log('The aside is opening');
			}

			function onOpened() {
				console.log('The aside is opened');
			}

			function onClose() {
				console.log('The aside is closing');
			}

			function onClosed() {
				console.log('The aside is closed');
			}
			document.getElementById('my-aside').addEventListener('open', onOpen);
			document.getElementById('my-aside').addEventListener('opened', onOpened);
			document.getElementById('my-aside').addEventListener('close', onClose);
			document.getElementById('my-aside').addEventListener('closed', onClosed);

			const modal = document.getElementById('medium-modal');
			modal.addEventListener('open', function() {
				console.log('medium modal open');
			});
			modal.addEventListener('opened', function() {
				console.log('medium modal opened');
			});
			modal.addEventListener('close', function() {
				console.log('close medium modal');
			});
			modal.addEventListener('closed', function() {
				console.log('medium modal closed');
			});

			function generateCards() {
				const fragment = document.createDocumentFragment();
				for (let i = 0; i < 20; i++) {
					const card = document.createElement('ts-card');
					card.textContent =
						'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Alias cumque delectus eligendi!' +
						' Commodi cumque in laboriosam omnis quos tempore! Ad amet at enim necessitatibus, quisquam quos ratione vero. In, qui!';
					fragment.appendChild(card);
				}
				return fragment;
			}

			document.getElementById('big-content').appendChild(generateCards());
			document.getElementById('medium-content').appendChild(generateCards());
		</script>
	</body>
</html>
